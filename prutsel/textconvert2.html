<HTML>
<HEAD>
<SCRIPT language="javascript">
function chomp(raw_text)
{	return raw_text.replace(/(\n|\r)+$/, '');
}

function doit()
{	var i, j, k;
	var len;

	var from=document.getElementById("from");
	var to=document.getElementById("to");

	line=new Array();
	data=new Array();
	line=from.value.split("\n");
	var buffer1='';
	var buffer2='';
	var temp='';

	buffer2='.global _bpmessages\r\n_messages:\r\n';

	i=0;
	k=0;

	for(i=0; i<line.length; i++)
	{	data=line[i].split(";");

//		if(data[0]=='') break;
//		if(data[1]=='') break;
//		if(data[2]=='') break;

//	alert(data[0]);
//	alert(data[1]);
//	alert(data[2]);


	if((data[0]!=undefined)&&(data[1]!=undefined)&&(data[2]!=undefined))
	{	if(data[1]==0)
		{	buffer1+="#define\t"+chomp(data[0])+"\tbpMsg("+k.toString(10)+", ";
		}
		else		
		{	buffer1+="#define\t"+chomp(data[0])+"\tbpMsgBR("+k.toString(10)+", ";
		}

		buffer2+="\t.pascii\t"+chomp(data[2])+"\r\n";

		temp=chomp(data[2]);
		len=temp.length-2;
		k+=len;
		buffer1+=len.toString(10)+")\r\n";
	}
	}

	to1.value=buffer1;
	to2.value=buffer2;
}



</SCRIPT>
</HEAD>
<BODY>
strings:<BR>
<textarea id="from" name="from" cols=80 rows=5>
READ,"Read:"
WRITE,"Write:"
BLAAT,"blablablablablka b"
WHAZZA,"sdfsdgfsgsfg"</textarea><BR>
<button onclick="doit()">convert</button><BR>
.h:<BR>
<textarea id="to1" name="to1" cols=80 rows=5>
</textarea>
<BR>.s<BR>
<textarea id="to2" name="to2" cols=80 rows=10>
</textarea>

</BODY>
</HTML>